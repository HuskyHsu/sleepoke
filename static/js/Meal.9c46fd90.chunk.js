"use strict";(self.webpackChunksleepoke=self.webpackChunksleepoke||[]).push([[658],{389:function(e,n,t){t.d(n,{EK:function(){return u},Zb:function(){return l},WD:function(){return h},wn:function(){return d},z$:function(){return m},E1:function(){return c},zZ:function(){return g},DI:function(){return x}});var r=t(733),i=t(268),s=t(291),a=t(184);function l(e){var n=e.pm;return(0,a.jsxs)("div",{className:"flex w-full flex-col items-center gap-1 p-2",children:[(0,a.jsxs)("p",{className:"font-bold",children:["No. ",n.pid.slice(-3)]}),(0,a.jsx)("div",{className:(0,r.Z)("relative h-16 w-16 overflow-hidden rounded-full","outline outline-2 outline-white",i.Bo[i.Dy[n.type]]),children:(0,a.jsx)(s.JO.lA.Pm,{pm:n})}),(0,a.jsx)("p",{className:"text-base",children:n.name}),(0,a.jsxs)("p",{className:"flex items-center text-xs",children:[n.sleep_type," - ",n.specialty]}),(0,a.jsx)("p",{className:"flex",children:new Array(n.berry_quantity).fill(0).map((function(e,t){return(0,a.jsx)("span",{className:"relative h-8 w-8",children:(0,a.jsx)(s.JO.lA.UL,{name:n.berry})},t)}))}),n.ingredients.length>0&&(0,a.jsx)("p",{className:"flex",children:n.ingredients.map((function(e){return(0,a.jsx)("span",{className:"relative h-8 w-8",children:(0,a.jsx)(s.JO.lA.o7,{name:e})},e)}))})]})}function c(e){var n=e.value,t=e.onChange;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,a.jsx)(s.JO.ol,{className:"h-5 w-5"})}),(0,a.jsx)("input",{type:"search",className:(0,r.Z)("block w-full rounded-lg border border-gray-300","bg-gray-50 p-2 pl-10 text-sm text-gray-900"),placeholder:"\u641c\u5c0b\u540d\u7a31",value:n,onChange:t})]})})}function u(e){var n=e.list,t=e.checkSet,i=e.Icon,l=e.handleChange;return(0,a.jsx)("div",{className:(0,r.Z)("flex w-full flex-wrap justify-items-center gap-x-4 gap-y-3 pb-2 pl-2"),children:n.map((function(e){return(0,a.jsx)(s.oC,{label:e,checked:t.has(e),onChange:l,children:i&&(0,a.jsx)(i,{name:e})},e)}))})}function o(e){var n=e.list,t=e.select,i=e.handleChange;return(0,a.jsx)("div",{className:(0,r.Z)("flex w-full flex-wrap gap-4 pb-2 pl-2"),children:n.map((function(e){return(0,a.jsx)(s.F2,{label:e,checked:null===t&&"none"===e.key||t===e.key,onChange:i},e.key)}))})}function d(e){var n=e.checked,t=e.onChange;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"checkbox",name:"filter",id:"filter",className:"hidden",checked:n,onChange:t}),(0,a.jsx)("label",{htmlFor:"filter",className:"flex cursor-pointer flex-col items-center",children:(0,a.jsx)(s.JO.wn,{className:"h-6 w-6"})})]})}function h(e){var n=e.checked,t=e.onChange;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"checkbox",name:"category",id:"category",className:"hidden",checked:n,onChange:t}),(0,a.jsx)("label",{htmlFor:"category",className:"flex cursor-pointer flex-col items-center",children:(0,a.jsx)(s.JO.WD,{className:"h-6 w-6"})})]})}function m(){return(0,a.jsx)("span",{className:"absolute -top-1 left-4 h-3 w-3 rounded-full bg-custom-green"})}var f=t(634);function g(e){var n=e.filter,t=e.handleChickChange;return(0,a.jsxs)("div",{className:(0,r.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayFilter?"mb-4 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,a.jsx)(s.c$,{title:"\u7be9\u9078\uff1a\u6a39\u679c"}),(0,a.jsx)(u,{list:f.nI.map((function(e){return e.name})),Icon:s.JO.lA.UL,checkSet:n.berries,handleChange:t("berries")}),(0,a.jsx)(s.c$,{title:"\u7be9\u9078\uff1a\u98df\u6750"}),(0,a.jsx)(u,{list:f.MP.map((function(e){return e.name})),Icon:s.JO.lA.o7,checkSet:n.ingredients,handleChange:t("ingredients")}),(0,a.jsx)(s.c$,{title:"\u7be9\u9078\uff1a\u5c08\u9577"}),(0,a.jsx)(u,{list:f.cw,checkSet:n.specialties,handleChange:t("specialties")}),(0,a.jsx)(s.c$,{title:"\u7be9\u9078\uff1a\u4e3b\u6280\u80fd"}),(0,a.jsx)(u,{list:f.nb,checkSet:n.skills,handleChange:t("skills")})]})}function x(e){var n=e.filter,t=e.handleGroupByChange;return(0,a.jsxs)("div",{className:(0,r.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayGroupBy?"mb-2 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,a.jsx)(s.c$,{title:"\u5206\u7d44\u65b9\u5f0f"}),(0,a.jsx)(o,{list:[{key:"none",name:"\u7121"},{key:"sleep_type",name:"\u7761\u7720\u5206\u985e"},{key:"berry",name:"\u6a39\u679c"},{key:"ingredients",name:"\u98df\u6750"},{key:"specialty",name:"\u5c08\u9577"},{key:"skill",name:"\u4e3b\u6280\u80fd"},{key:"type",name:"\u5c6c\u6027"}],select:n.groupBy,handleChange:t})]})}},807:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(942),i=t(413),s=t(439),a=t(791),l=t(733),c=t(634),u=t(291),o=t(184);function d(e){var n=e.list,t=e.select,r=e.handleChange;return(0,o.jsx)("div",{className:(0,l.Z)("flex w-full flex-wrap gap-4 pl-2"),children:n.map((function(e){return(0,o.jsx)(u.F2,{label:{key:e.name,name:e.name},checked:t===e.name,onChange:r},e.name)}))})}function h(e){var n=e.n,t=e.handleSizeChange;return(0,o.jsxs)("button",{type:"button",className:"h-8 w-8 rounded-full bg-amber-100 shadow-list-items",onClick:function(){return t(n)},children:[n>0&&"+",n]})}function m(e){var n=e.name,t=e.n,r=e.min,i=e.selected,s=e.handleCountChange;return(0,o.jsx)("button",{type:"button",className:(0,l.Z)("h-8 w-8 rounded-full","shadow-list-items",i?"bg-amber-300":"bg-amber-100"),onClick:function(){return s(n,t)},children:t>0?"".concat(t):"<".concat(r)})}function f(e){var n=e.filter,t=e.handleInputChange;return(0,o.jsxs)("div",{className:"h-full space-y-4",children:[(0,o.jsx)(u.c$,{title:"\u6599\u7406\u7a2e\u985e"}),(0,o.jsx)(d,{list:[{name:"\u5496\u54e9"},{name:"\u6c99\u62c9"},{name:"\u98f2\u6599\u3001\u9ede\u5fc3"}],select:n.type,handleChange:t})]})}function g(e){var n=e.filter,t=e.handleSizeChange;return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(u.c$,{title:"\u934b\u5b50\u5bb9\u91cf"}),(0,o.jsxs)("div",{className:"flex items-center gap-3 pl-2 text-center font-bold",children:[(0,o.jsx)(h,{n:-3,handleSizeChange:t}),(0,o.jsx)(h,{n:-1,handleSizeChange:t}),(0,o.jsx)("p",{className:"flex h-12 w-12 flex-col justify-center rounded-full bg-amber-300 shadow-list-items",children:(0,o.jsx)("span",{children:n.size})}),(0,o.jsx)(h,{n:1,handleSizeChange:t}),(0,o.jsx)(h,{n:3,handleSizeChange:t})]})]})}var x=t(389);function p(e){var n=e.filter,t=e.handleChickChange;return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(u.c$,{title:"\u98df\u6750"}),(0,o.jsx)(x.EK,{list:c.MP.map((function(e){return e.name})),Icon:u.JO.lA.o7,checkSet:n.ingredients,handleChange:t})]})}var j=t(433),v=Object.fromEntries(c.MP.map((function(e){return[e.name,e.point]}))),b=function(e){return Object.fromEntries(c.MP.filter((function(n){return e.ingredients.has(n.name)})).map((function(n){var t=c.l.filter((function(n){return n.type===e.type&&n.ingredients.reduce((function(e,n){return e+n.count}),0)<=e.size&&n.ingredients.every((function(n){return e.ingredients.has(n.name)}))})).flatMap((function(e){return e.ingredients})).filter((function(e){return e.name===n.name})).map((function(e){return e.count}));if(t.length>0){var r=[-1].concat((0,j.Z)(new Set(t))).sort((function(e,n){return e-n}));return[n.name,{count:r[r.length-1],list:r}]}return[n.name,{count:-1,list:[]}]})))};function y(e){var n=e.filter,t=e.handleCountChange;if(n.ingredients.size<=0)return(0,o.jsx)(o.Fragment,{});var r=b(n);return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(u.c$,{title:"\u98df\u6750\u6578\u91cf (\u9078\u81f3\u5c11\u6eff\u8db3\u591a\u5c11\u500b)"}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-y-2 md:grid-cols-2",children:Object.entries(r).sort((function(e,n){return n[1].list.length-e[1].list.length})).map((function(e){var r=(0,s.Z)(e,2),i=r[0],a=r[1];return(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"flex w-16 flex-col items-center",children:[(0,o.jsx)("div",{className:"h-12 w-12",children:(0,o.jsx)(u.JO.lA.o7,{name:i})}),(0,o.jsxs)("span",{className:(0,l.Z)("-mt-3 whitespace-nowrap","rounded-full border-2 border-amber-300","bg-white px-1 text-center text-xs font-medium"),children:[v[i],"\u80fd\u91cf"]})]}),0===a.list.length&&"\u672a\u7528\u5230 / \u5c1a\u7f3a\u5176\u4ed6\u98df\u6750 / \u934b\u5b50\u5bb9\u91cf\u4e0d\u5920",a.list.length>0&&a.list.map((function(e,r){return(0,o.jsx)(m,{name:i,n:e,min:a.list[1],selected:void 0===n.ingredientsCount[i]?r===a.list.length-1:n.ingredientsCount[i]===e,handleCountChange:t},e)}))]},i)}))})]})}function C(e){var n=e.filter,t=e.handleInputChange,r=e.handleSizeChange,i=e.handleChickChange,s=e.handleCountChange;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{filter:n,handleInputChange:t}),(0,o.jsx)(g,{filter:n,handleSizeChange:r}),(0,o.jsx)(p,{filter:n,handleChickChange:i}),(0,o.jsx)(y,{filter:n,handleCountChange:s})]})}function N(e){var n=e.meal,t=e.filter;return(0,o.jsxs)("div",{className:"flex flex-col justify-between gap-y-1 p-2 pb-4",children:[(0,o.jsx)("h4",{className:"font-bold",children:n.name}),(0,o.jsx)("div",{className:"flex items-center gap-x-2",children:(0,o.jsx)("ul",{className:"flex w-full items-center gap-6",children:n.ingredients.length>0?n.ingredients.map((function(e){var n=e.name,r=e.count;return(0,o.jsxs)("li",{className:"relative flex items-center",children:[(0,o.jsx)("div",{className:(0,l.Z)("h-10 w-10 rounded-full p-1","transition-all duration-300",t.ingredients.has(n)&&(void 0===t.ingredientsCount[n]||t.ingredientsCount[n]>=r)?"bg-amber-300":"bg-amber-100"),children:(0,o.jsx)(u.JO.lA.o7,{name:n})}),(0,o.jsxs)("span",{className:(0,l.Z)("absolute -bottom-1 -right-4 rounded-full","border-2 border-amber-300 bg-white px-1 text-xs font-medium"),children:["\xd7",r]})]},n)})):(0,o.jsxs)("li",{className:"relative flex items-center",children:[(0,o.jsx)("div",{className:"h-10 w-10 rounded-full bg-amber-100 p-1"}),(0,o.jsx)("span",{className:"absolute -right-1 bottom-0 text-xs font-medium",children:">0"})]})})})]})}function w(e){var n=e.meal,t=e.filter,r=n.ingredients.every((function(e){return t.ingredients.has(e.name)}))&&n.ingredients.reduce((function(e,n){return e+n.count}),0)<=t.size&&n.ingredients.every((function(e){return void 0===t.ingredientsCount[e.name]||t.ingredientsCount[e.name]>=e.count}));return(0,o.jsxs)("li",{className:(0,l.Z)("relative flex border-[1px]","items-center gap-0 overflow-hidden rounded-[12px]",r?"border-custom-green":"border-amber-300","shadow-list-items"),children:[(0,o.jsxs)("div",{className:(0,l.Z)("relative flex h-full w-24 flex-col justify-center","transition-all duration-300",r?"bg-custom-green/60":"bg-amber-100"),children:[(0,o.jsx)(u.JO.lA.K5,{name:n.name}),(0,o.jsx)("span",{className:"absolute bottom-0 right-2 font-bold",children:n.ingredients.reduce((function(e,n){return e+n.count}),0)})]}),(0,o.jsx)(N,{filter:t,meal:n})]},n.name)}var k=function(){var e=(0,a.useState)({type:"\u5496\u54e9",size:15,ingredients:new Set,ingredientsCount:{}}),n=(0,s.Z)(e,2),t=n[0],d=n[1];return(0,a.useEffect)((function(){document.title="Sleep Meals"}),[]),(0,o.jsxs)("div",{className:"flex flex-col gap-4 pt-4",children:[(0,o.jsx)(C,{filter:t,handleInputChange:function(e){var n=e.target.name;d((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:n})}))},handleSizeChange:function(e){d((function(n){return(0,i.Z)((0,i.Z)({},n),{},{size:Math.max(15,n.size+e)})}))},handleChickChange:function(e){var n=e.target,t=n.name,r=n.checked;d((function(e){return r?e.ingredients.add(t):(e.ingredients.delete(t),delete e.ingredientsCount[t]),(0,i.Z)((0,i.Z)({},e),{},{ingredients:e.ingredients,ingredientsCount:e.ingredientsCount})}))},handleCountChange:function(e,n){d((function(t){return(0,i.Z)((0,i.Z)({},t),{},{ingredientsCount:Object.assign(t.ingredientsCount,(0,r.Z)({},e,n))})}))}}),(0,o.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,o.jsx)(u.Fl,{title:"\u6e05\u55ae"}),(0,o.jsx)("ul",{className:(0,l.Z)("gap-4","grid grid-cols-1","md:grid-cols-2"),children:c.l.filter((function(e){return!(0===e.ingredients.length&&t.ingredients.size>0)&&e.type===t.type})).sort((function(e,n){if(t.ingredients.size>0){var r=e.ingredients.some((function(e){return t.ingredients.has(e.name)})),i=n.ingredients.some((function(e){return t.ingredients.has(e.name)}));if(r!==i)return r?-1:1;if((r=e.ingredients.every((function(e){return t.ingredients.has(e.name)})))!==(i=n.ingredients.every((function(e){return t.ingredients.has(e.name)}))))return r?-1:1;if((r=e.ingredients.every((function(e){return void 0===t.ingredientsCount[e.name]||t.ingredientsCount[e.name]>=e.count})))!==(i=n.ingredients.every((function(e){return void 0===t.ingredientsCount[e.name]||t.ingredientsCount[e.name]>=e.count}))))return r?-1:1}var s=e.ingredients.reduce((function(e,n){return e+n.count}),0),a=n.ingredients.reduce((function(e,n){return e+n.count}),0);return s!==a?s-a:e.ingredients.length-n.ingredients.length})).map((function(e){return(0,o.jsx)(w,{filter:t,meal:e},e.name)}))})]})]})}}}]);
//# sourceMappingURL=Meal.9c46fd90.chunk.js.map