{"version":3,"file":"static/js/Detail.971216a6.chunk.js","mappings":"2LAsBMA,EAAWC,OAAOC,YAAYC,EAAAA,GAAQC,KAAI,SAACC,GAAK,MAAK,CAACA,EAAMC,KAAMD,EAAME,MAAM,KAE9EC,EAAuB,CAC3B,CACEC,MAAO,eACPC,QAAS,SAAAC,GAAA,IAAGC,EAAED,EAAFC,GAAE,OAAqBC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAGH,EAAGI,YAAc,GAEzD,CACEP,MAAO,eACPC,QAAS,SAAAO,GAAA,IAAGL,EAAEK,EAAFL,GAAE,OACZM,EAAAA,EAAAA,MAAA,QAAMC,UAAU,+BAA8BJ,SAAA,EAC5CF,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAc,CAACC,KAAMT,EAAGS,KAAMF,UAAU,YACxCP,EAAGS,OACC,GAGX,CACEZ,MAAO,eACPC,QAAS,SAAAY,GAAA,IAAGV,EAAEU,EAAFV,GAAE,OAAqBC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAGH,EAAGW,WAAa,GAExD,CACEd,MAAO,eACPC,QAAS,SAAAc,GAAA,IAAGZ,EAAEY,EAAFZ,GAAE,OACZM,EAAAA,EAAAA,MAAA,MAAIC,UAAU,kCAAiCJ,SAAA,CAC5C,IAAIU,MAAMb,EAAGc,gBAAgBC,KAAK,GAAGvB,KAAI,SAACwB,EAAGC,GAAK,OACjDhB,EAAAA,EAAAA,KAAA,MAAIM,UAAU,OAAMJ,UAClBF,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAe,CAACd,KAAMM,EAAGP,SADFwB,EAErB,KAEPhB,EAAAA,EAAAA,KAAA,MACEM,WAAWW,EAAAA,EAAAA,GACT,6BACA,yEACAf,SAEDH,EAAGP,UAEH,GAGT,CACEI,MAAO,eACPC,QAAS,SAAAqB,GAAA,IAAGnB,EAAEmB,EAAFnB,GAAE,OACZC,EAAAA,EAAAA,KAAA,MAAIM,UAAU,8CAA6CJ,SACxDH,EAAGoB,YAAY5B,KAAI,SAAC6B,GAAI,OACvBf,EAAAA,EAAAA,MAAA,MAAIC,UAAU,WAAUJ,SAAA,EACtBF,EAAAA,EAAAA,KAAA,OAAKM,UAAU,OAAMJ,UACnBF,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAoB,CAACd,KAAM2B,OAE9BpB,EAAAA,EAAAA,KAAA,QACEM,WAAWW,EAAAA,EAAAA,GACT,4BACA,yEACAf,SAEDkB,MAVyBA,EAYzB,KAEJ,GAGT,CACExB,MAAO,qBACPC,QAAS,SAAAwB,GAAA,IAAGtB,EAAEsB,EAAFtB,GAAE,OAAqBC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAGH,EAAGuB,OAAS,GAEpD,CACE1B,MAAO,iCACPC,QAAS,SAAA0B,GAAA,IAAGxB,EAAEwB,EAAFxB,GAAE,OAAqBC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAGH,EAAGyB,mBAAqB,GAEhE,CACE5B,MAAO,2BACPC,QAAS,SAAA4B,GAA2B,IAAxB1B,EAAE0B,EAAF1B,GACJ2B,EAAUC,EAAAA,EAAiBC,WAAU,SAACC,GAAC,OAAKA,IAAM9B,EAAG+B,cAAc,IAAI,EAC7E,OACEzB,EAAAA,EAAAA,MAAAJ,EAAAA,SAAA,CAAAC,SAAA,CACGH,EAAG+B,eAAe,MAAIJ,EAAQ,MAGrC,GAEF,CACE9B,MAAO,uCACPC,QAAS,SAAAkC,GAA2B,IAAxBhC,EAAEgC,EAAFhC,GACJiC,EAAY7C,EAASY,EAAGP,OACxByC,EAAWlC,EAAG+B,eAAeI,MAAM,KAAKC,QAAO,SAACC,EAAKC,GAAG,OAAW,GAAND,EAAWE,OAAOD,EAAI,GAAE,GACrFE,EAASC,KAAKC,KAAM,MAAQR,GAAaD,EAAYjC,EAAGc,iBACxDa,EAAUgB,EAAAA,GAAcd,WAAU,SAACe,GAAC,OAAKA,IAAMJ,CAAM,IAAI,EAC/D,OACElC,EAAAA,EAAAA,MAAAJ,EAAAA,SAAA,CAAAC,SAAA,CACG8B,EAAYjC,EAAGc,eAAe,IAAEoB,EAAS,MAAIM,EAAO,WAASb,EAAQ,MAG5E,GAEF,CACE9B,MAAO,2BACPC,QAAS,SAAA+C,GAA2B,IAAxB7C,EAAE6C,EAAF7C,GACV,OAAOM,EAAAA,EAAAA,MAAAJ,EAAAA,SAAA,CAAAC,SAAA,CAAGH,EAAG8C,yBAAyB,WACxC,IA8KJ,UA1KA,WACE,IAAoCC,GAAXC,EAAAA,EAAAA,MAAjBC,KAAAA,OAAI,IAAAF,EAAG,MAAKA,EACdG,EAAUC,EAAAA,GAAOtB,WAAU,SAAC7B,GAAW,OAAKA,EAAGoD,MAAG,IAAAC,OAASJ,EAAKK,SAAS,EAAG,KAAM,IAClFC,GAAWC,EAAAA,EAAAA,MAEjBC,GAA4BC,EAAAA,EAAAA,UAAiB,CAC3CzC,MAAOiC,EACPS,WAAY,CAAC,EAAG,GAChBC,SAAU,CAAC,EAAG,GACdC,cAAc,IACdC,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GALKO,EAAMF,EAAA,GAAEG,EAASH,EAAA,GAOlB9D,EAAKmD,EAAAA,GAAOa,EAAO/C,OAEzBiD,YAAW,WACTD,GAAU,SAACE,GAAU,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBD,GAAU,IACbN,cAAc,GAAK,GAEvB,GAAG,KAEH,IAgBMQ,EAAc,SAACC,GACnBL,GAAU,SAACE,GACT,IAAII,EAAWJ,EAAWlD,MAAQqD,EAOlC,OANIC,EAAW,EACbA,EAAWpB,EAAAA,GAAOqB,OAAS,EAClBD,GAAYpB,EAAAA,GAAOqB,SAC5BD,EAAW,IAGbH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKD,GAAU,IACblD,MAAOsD,GAEX,GACF,EAqBA,OAnBAE,EAAAA,EAAAA,YAAU,WACRC,SAAS7E,MAAK,SAAAwD,OAAYrD,EAAGN,KAC/B,GAAG,CAACM,KAEJyE,EAAAA,EAAAA,YAAU,WACR,IAAQd,EAAyBK,EAAzBL,WAAYC,EAAaI,EAAbJ,SAEde,EAAiBf,EAAS,GAAKD,EAAW,GAC1CiB,EAAiBhB,EAAS,GAAKD,EAAW,GAE5ClB,KAAKoC,IAAIF,GAAkBlC,KAAKoC,IAAID,IAAmBnC,KAAKoC,IAAIF,GAAkB,IAC/DN,EAArBM,EAAiB,GAAiB,EAAiB,EAEvD,GAAG,CAACX,EAAOJ,YAEXa,EAAAA,EAAAA,YAAU,WACRlB,EAAS,OAADF,OAAQF,EAAAA,GAAOa,EAAO/C,OAAOmC,IAAI0B,OAAO,IAClD,GAAG,CAACd,EAAO/C,SAGTX,EAAAA,EAAAA,MAAA,WACEC,UAAU,qBACVwE,aAtDqB,SAACC,GACxB,IAAAC,EAA6BD,EAAME,QAAQ,GAAnCC,EAAOF,EAAPE,QAASC,EAAOH,EAAPG,QACjBnB,GAAU,SAACE,GAAU,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBD,GAAU,IACbR,WAAY,CAACwB,EAASC,IAAQ,GAElC,EAiDIC,WA/CmB,SAACL,GACtB,IAAAM,EAA6BN,EAAMO,eAAe,GAA1CJ,EAAOG,EAAPH,QAASC,EAAOE,EAAPF,QACjBnB,GAAU,SAACE,GAAU,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBD,GAAU,IACbP,SAAU,CAACuB,EAASC,IAAQ,GAEhC,EAyC+BjF,SAAA,EAE3BG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+BAA8BJ,SAAA,EAC3CF,EAAAA,EAAAA,KAAA,OAAKM,UAAU,oBAAmBJ,UAChCF,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAgB,CAACR,GAAIA,OAExBC,EAAAA,EAAAA,KAAA,OAAKM,UAAU,oBAAmBJ,UAChCF,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAgB,CAACR,GAAIA,EAAIwF,OAAO,OAInCvF,EAAAA,EAAAA,KAAA,OACEM,WAAWW,EAAAA,EAAAA,GACT,sDACA,iBACA,yBAIJjB,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAW,CACVD,WAAWW,EAAAA,EAAAA,GACT,iDACA,qDAEFuE,QAAS,kBAAMpB,GAAa,EAAE,KAEhCpE,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAS,CACRD,WAAWW,EAAAA,EAAAA,GACT,kDACA,qDAEFuE,QAAS,kBAAMpB,EAAY,EAAE,QAIjC/D,EAAAA,EAAAA,MAAA,MAAIC,UAAU,WAAUJ,SAAA,CAAC,IACrBH,EAAGoD,IAAI0B,MAAM,GAAG,IAAE9E,EAAGN,SAGzBO,EAAAA,EAAAA,KAACyF,EAAAA,GAAU,CAAC7F,MAAM,8BAClBI,EAAAA,EAAAA,KAAA,MAAIM,UAAU,2BAA0BJ,SACrCP,EAAWJ,KAAI,SAACmG,EAAM1E,GAAK,OAC1BX,EAAAA,EAAAA,MAAA,MACEC,WAAWW,EAAAA,EAAAA,GAAK,iCAAkCD,EAAQ,GAAK,cAAcd,SAAA,EAG7EF,EAAAA,EAAAA,KAAA,QACEM,WAAWW,EAAAA,EAAAA,GACT,QACA,8BACA,4CACA,+CACAf,SAEDwF,EAAK9F,SAGRI,EAAAA,EAAAA,KAAC0F,EAAK7F,QAAO,CAACE,GAAIA,MAbbiB,EAcF,OAIThB,EAAAA,EAAAA,KAACyF,EAAAA,GAAU,CAAC7F,MAAM,kBAClBS,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CJ,SAAA,CACtD,IAAIU,MAAM,GAAGE,KAAK,GAAGvB,KAAI,SAACwB,EAAG4E,GAC5B,OACEtF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeJ,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,QAAMM,UAAU,mCAAkCJ,SAAEH,EAAG6F,MAAMD,MAC7D3F,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAAA,GAAiB,CAACR,GAAIA,EAAIiB,MAAO2E,MAFAA,EAKxC,KAGA3F,EAAAA,EAAAA,KAAA,OACEM,WAAWW,EAAAA,EAAAA,GACT,sDACA,iBACA,4BAKNjB,EAAAA,EAAAA,KAACO,EAAAA,GAAAA,GAAU,CACTD,WAAWW,EAAAA,EAAAA,GACT,sDACA,2BACA8C,EAAOH,aAAe,6BAA+B,iBAK/D,C","sources":["pages/Detail/Detail.tsx"],"sourcesContent":["import { useState, useEffect, TouchEvent } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport clsx from 'clsx';\n\nimport { Pokemon } from '@/types';\nimport { Icon, TitleSlide } from '@/components';\nimport { pmFrequencyOrder, pmEnergyOrder, pmList, berries } from '@/data';\n\ntype ContentProps = { pm: Pokemon };\n\ntype Render = {\n  title: string;\n  Content: ({ pm }: ContentProps) => JSX.Element;\n};\n\ntype Status = {\n  index: number;\n  touchStart: number[];\n  touchEnd: number[];\n  displaySwipe: boolean;\n};\n\nconst berryMap = Object.fromEntries(berries.map((berry) => [berry.name, berry.point]));\n\nconst renderData: Render[] = [\n  {\n    title: '分類',\n    Content: ({ pm }: ContentProps) => <>{pm.sleep_type}</>,\n  },\n  {\n    title: '屬性',\n    Content: ({ pm }: ContentProps) => (\n      <span className='flex items-center gap-2 pl-2'>\n        <Icon.Game.Type type={pm.type} className='h-8 w-8' />\n        {pm.type}\n      </span>\n    ),\n  },\n  {\n    title: '專長',\n    Content: ({ pm }: ContentProps) => <>{pm.specialty}</>,\n  },\n  {\n    title: '樹果',\n    Content: ({ pm }: ContentProps) => (\n      <ul className='relative flex whitespace-nowrap'>\n        {new Array(pm.berry_quantity).fill(0).map((_, index) => (\n          <li className='w-12' key={index}>\n            <Icon.Game.Berry name={pm.berry} />\n          </li>\n        ))}\n        <li\n          className={clsx(\n            'absolute -right-8 bottom-0',\n            'rounded-full border-[1px] border-amber-300 bg-white px-2 py-1 text-xs',\n          )}\n        >\n          {pm.berry}\n        </li>\n      </ul>\n    ),\n  },\n  {\n    title: '食材',\n    Content: ({ pm }: ContentProps) => (\n      <ul className='mb-2 flex w-full gap-x-12 whitespace-nowrap'>\n        {pm.ingredients.map((item) => (\n          <li className='relative' key={item}>\n            <div className='w-10'>\n              <Icon.Game.Ingredient name={item} />\n            </div>\n            <span\n              className={clsx(\n                'absolute -bottom-2 left-4',\n                'rounded-full border-[1px] border-amber-300 bg-white px-2 py-1 text-xs',\n              )}\n            >\n              {item}\n            </span>\n          </li>\n        ))}\n      </ul>\n    ),\n  },\n  {\n    title: '主技能',\n    Content: ({ pm }: ContentProps) => <>{pm.skill}</>,\n  },\n  {\n    title: '主技能描述',\n    Content: ({ pm }: ContentProps) => <>{pm.skill_description}</>,\n  },\n  {\n    title: '幫忙間隔',\n    Content: ({ pm }: ContentProps) => {\n      const pmOrder = pmFrequencyOrder.findIndex((f) => f === pm.base_frequency) + 1;\n      return (\n        <>\n          {pm.base_frequency} (#{pmOrder})\n        </>\n      );\n    },\n  },\n  {\n    title: '果實能量基準',\n    Content: ({ pm }: ContentProps) => {\n      const basePoint = berryMap[pm.berry];\n      const totalSec = pm.base_frequency.split(':').reduce((acc, cur) => acc * 60 + Number(cur), 0);\n      const energy = Math.ceil((86400 / totalSec) * (basePoint * pm.berry_quantity));\n      const pmOrder = pmEnergyOrder.findIndex((e) => e === energy) + 1;\n      return (\n        <>\n          {basePoint * pm.berry_quantity}/{totalSec}s [{energy}/day] (#{pmOrder})\n        </>\n      );\n    },\n  },\n  {\n    title: '友情點數',\n    Content: ({ pm }: ContentProps) => {\n      return <>{pm.friendship_points_needed}點</>;\n    },\n  },\n];\n\nfunction Detail() {\n  const { link = '001' } = useParams();\n  const pmIndex = pmList.findIndex((pm: Pokemon) => pm.pid === `#${link.padStart(4, '0')}`);\n  const navigate = useNavigate();\n\n  const [status, setStatus] = useState<Status>({\n    index: pmIndex,\n    touchStart: [0, 0],\n    touchEnd: [0, 0],\n    displaySwipe: true,\n  });\n\n  const pm = pmList[status.index];\n\n  setTimeout(function () {\n    setStatus((prevStatus) => ({\n      ...prevStatus,\n      displaySwipe: false,\n    }));\n  }, 2000);\n\n  const handleTouchStart = (event: TouchEvent) => {\n    const { clientX, clientY } = event.touches[0];\n    setStatus((prevStatus) => ({\n      ...prevStatus,\n      touchStart: [clientX, clientY],\n    }));\n  };\n\n  const handleTouchEnd = (event: TouchEvent) => {\n    const { clientX, clientY } = event.changedTouches[0];\n    setStatus((prevStatus) => ({\n      ...prevStatus,\n      touchEnd: [clientX, clientY],\n    }));\n  };\n\n  const handleSwipe = (plusMinus: number) => {\n    setStatus((prevStatus) => {\n      let newIndex = prevStatus.index + plusMinus;\n      if (newIndex < 0) {\n        newIndex = pmList.length - 1;\n      } else if (newIndex >= pmList.length) {\n        newIndex = 0;\n      }\n\n      return {\n        ...prevStatus,\n        index: newIndex,\n      };\n    });\n  };\n\n  useEffect(() => {\n    document.title = `Sleep ${pm.name}`;\n  }, [pm]);\n\n  useEffect(() => {\n    const { touchStart, touchEnd } = status;\n\n    const swipeDistanceX = touchEnd[0] - touchStart[0];\n    const swipeDistanceY = touchEnd[1] - touchStart[1];\n\n    if (Math.abs(swipeDistanceX) > Math.abs(swipeDistanceY) && Math.abs(swipeDistanceX) > 50) {\n      swipeDistanceX > 0 ? handleSwipe(-1) : handleSwipe(1);\n    }\n  }, [status.touchEnd]);\n\n  useEffect(() => {\n    navigate(`/pm/${pmList[status.index].pid.slice(-3)}`);\n  }, [status.index]);\n\n  return (\n    <section\n      className='relative space-y-4'\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n    >\n      <div className='relative flex justify-center'>\n        <div className='z-10 md:h-[273px]'>\n          <Icon.Game.PmFull pm={pm} />\n        </div>\n        <div className='z-10 md:h-[273px]'>\n          <Icon.Game.PmFull pm={pm} shiny={true} />\n        </div>\n\n        {/* bg banner */}\n        <div\n          className={clsx(\n            'absolute -inset-x-4 bottom-0 z-0 h-3/5 md:inset-x-0',\n            'md:rounded-2xl',\n            'bg-custom-green/60',\n          )}\n        />\n\n        <Icon.Before\n          className={clsx(\n            'absolute bottom-8 left-0 z-20 hidden h-32 w-32',\n            'cursor-pointer fill-slate-100 opacity-40 md:block',\n          )}\n          onClick={() => handleSwipe(-1)}\n        />\n        <Icon.Next\n          className={clsx(\n            'absolute bottom-8 right-0 z-20 hidden h-32 w-32',\n            'cursor-pointer fill-slate-100 opacity-40 md:block',\n          )}\n          onClick={() => handleSwipe(1)}\n        />\n      </div>\n\n      <h2 className='text-2xl'>\n        #{pm.pid.slice(2)} {pm.name}\n      </h2>\n\n      <TitleSlide title='基本資訊' />\n      <ul className='grid grid-cols-2 gap-y-4'>\n        {renderData.map((data, index) => (\n          <li\n            className={clsx('flex h-10 items-center gap-x-2', index > 3 && 'col-span-2')}\n            key={index}\n          >\n            <span\n              className={clsx(\n                'py-px',\n                'shrink-0 grow-0 basis-[30%]',\n                'border-2 border-solid border-custom-green',\n                'rounded-full text-center text-sm text-black',\n              )}\n            >\n              {data.title}\n            </span>\n\n            <data.Content pm={pm} />\n          </li>\n        ))}\n      </ul>\n\n      <TitleSlide title='睡姿' />\n      <div className='relative flex justify-center text-center'>\n        {new Array(2).fill(0).map((_, i) => {\n          return (\n            <div className='relative z-10' key={i}>\n              <span className='absolute inset-x-0 top-0 text-xl'>{pm.sleep[i]}</span>\n              <Icon.Game.PmSleep pm={pm} index={i} />\n            </div>\n          );\n        })}\n\n        {/* bg banner */}\n        <div\n          className={clsx(\n            'absolute -inset-x-4 bottom-0 z-0 h-3/5 md:inset-x-0',\n            'md:rounded-2xl',\n            'bg-custom-green/60',\n          )}\n        />\n      </div>\n\n      <Icon.Swipe\n        className={clsx(\n          'absolute inset-0 -z-10 h-full w-full fill-slate-200',\n          'transition duration-[2s]',\n          status.displaySwipe ? 'block opacity-40 md:hidden' : 'opacity-0',\n        )}\n      />\n    </section>\n  );\n}\n\nexport default Detail;\n"],"names":["berryMap","Object","fromEntries","berries","map","berry","name","point","renderData","title","Content","_ref","pm","_jsx","_Fragment","children","sleep_type","_ref2","_jsxs","className","Icon","type","_ref3","specialty","_ref4","Array","berry_quantity","fill","_","index","clsx","_ref5","ingredients","item","_ref6","skill","_ref7","skill_description","_ref8","pmOrder","pmFrequencyOrder","findIndex","f","base_frequency","_ref9","basePoint","totalSec","split","reduce","acc","cur","Number","energy","Math","ceil","pmEnergyOrder","e","_ref10","friendship_points_needed","_useParams$link","useParams","link","pmIndex","pmList","pid","concat","padStart","navigate","useNavigate","_useState","useState","touchStart","touchEnd","displaySwipe","_useState2","_slicedToArray","status","setStatus","setTimeout","prevStatus","_objectSpread","handleSwipe","plusMinus","newIndex","length","useEffect","document","swipeDistanceX","swipeDistanceY","abs","slice","onTouchStart","event","_event$touches$","touches","clientX","clientY","onTouchEnd","_event$changedTouches","changedTouches","shiny","onClick","TitleSlide","data","i","sleep"],"sourceRoot":""}