"use strict";(self.webpackChunksleepoke=self.webpackChunksleepoke||[]).push([[842],{200:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(433),s=t(791),l=t(213),i=t(577),a=t(389),c=t(439),o=t(733),d=t(184);function u(e){var n=e.filter,t=e.handleChickChange,s=e.handleGroupByChange,i=e.removeFilter,u=e.handleFirstChange,h=[n.berries,n.ingredients,n.skills,n.specialties,n.locations].some((function(e){return e.size>0})),p=[{set:n.berries,name:"\u6a39\u679c",key:"berries"},{set:n.ingredients,name:"\u98df\u6750",key:"ingredients"},{set:n.specialties,name:"\u5c08\u9577",key:"specialties"},{set:n.skills,name:"\u4e3b\u6280\u80fd",key:"skills"},{set:n.locations,name:"\u5340\u57df",key:"locations"}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.zZ,{filter:n,handleChickChange:t,handleFirstChange:u}),(0,d.jsx)(a.DI,{filter:n,handleGroupByChange:s}),(0,d.jsx)("div",{className:(0,o.Z)("mb-2 flex flex-wrap gap-2","transition-all duration-300",h&&!1===n.displayGroupBy?"mb-4 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:!n.displayFilter&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"py-1 pl-2",children:"\u7be9\u9078\u9805\u76ee\uff1a"}),p.filter((function(e){return e.set.size>0})).map((function(e){var n=e.name,t=e.set,s=e.key;return(0,r.Z)(t).map((function(e){return[n,e,s]}))})).flat().map((function(e){var t=(0,c.Z)(e,3),r=t[0],s=t[1],a=t[2],u="".concat(r,"-").concat(s);return(0,d.jsxs)("span",{className:(0,o.Z)("flex items-center gap-x-2","rounded-xl bg-amber-100 px-2 py-1 shadow-list-items"),children:["\u98df\u6750"===r&&n.onlyFirstIngredient&&"(\u7b2c\u4e00\u98df\u6750)",s,(0,d.jsx)(l.JO.x8,{className:"h-3 w-3",onClick:function(){i(a,s)}})]},u)}))]})})]})}var h=t(87),p=t(268);function f(e){var n=e.pmList,t=e.filter,s=e.groupBy;return(0,d.jsx)("ul",{className:(0,o.Z)("grid grid-cols-list-mobile justify-between justify-items-center gap-y-4","md:mx-0 md:grid-cols-list md:gap-x-4","h-full"),children:n.filter((function(e){return function(e,n){return null===t.groupBy||(Array.isArray(e[t.groupBy])?"ingredients"===t.groupBy&&t.onlyFirstIngredient?e[t.groupBy][0]===n:e[t.groupBy].includes(n):e[t.groupBy]===n)}(e,s)})).filter((function(e){var n=""===t.keyword;return""!=t.keyword&&(n=e.name.includes(t.keyword)),n&&t.berries.size>0&&(n=t.berries.has(e.berry)),n&&t.ingredients.size>0&&(n=t.onlyFirstIngredient?void 0!==(0,r.Z)(t.ingredients).find((function(n){return n===e.ingredients[0]})):void 0!==e.ingredients.find((function(e){return t.ingredients.has(e)}))),n&&t.skills.size>0&&(n=t.skills.has(e.skill)),n&&t.specialties.size>0&&(n=t.specialties.has(e.specialty)),n&&t.locations.size>0&&(n=Object.keys(e.locations).some((function(e){return t.locations.has(e)}))),n})).map((function(e){return(0,d.jsxs)("li",{className:(0,o.Z)("relative w-28 md:w-32","rounded-xl text-center","transition-all duration-300","shadow-list-items hover:shadow-list-items--hover","hover:translate-x-[-0.2rem] hover:translate-y-[-0.2rem]",p.vh[e.sleep_type]),children:[(0,d.jsx)(a.Zb,{pm:e}),(0,d.jsx)(h.rU,{className:"stretchedLink",to:"/pm/".concat(e.pid.slice(-3))})]},e.pid)}))})}var m=t(942),x=t(413);var y=function(){var e=function(){var e=(0,s.useState)({keyword:"",berries:new Set,ingredients:new Set,onlyFirstIngredient:!1,skills:new Set,specialties:new Set,locations:new Set,displayFilter:!1,groupBy:null,displayGroupBy:!1}),n=(0,c.Z)(e,2),t=n[0],r=n[1];return{filter:t,handleInputChange:function(e){var n=e.target.value;r((function(e){return(0,x.Z)((0,x.Z)({},e),{},{keyword:n})}))},handleChickChange:function(e){return function(n){var t=n.target,s=t.name,l=t.checked;r((function(n){return l?n[e].add(s):n[e].delete(s),(0,x.Z)((0,x.Z)({},n),{},(0,m.Z)({},e,n[e]))}))}},removeFilter:function(e,n){r((function(t){return t[e].delete(n),(0,x.Z)((0,x.Z)({},t),{},(0,m.Z)({},e,t[e]))}))},handleGroupByChange:function(e){var n=e.target.name;r((function(e){return(0,x.Z)((0,x.Z)({},e),{},{groupBy:"none"!==n?n:null})}))},handleCheckChange:function(e){return function(n){var t=n.target.checked;r((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,m.Z)({},e,t))}))}}}}(),n=e.filter,t=e.handleInputChange,o=e.handleChickChange,h=e.removeFilter,p=e.handleGroupByChange,y=e.handleCheckChange;(0,s.useEffect)((function(){document.title="Sleep Pok\xe9dex"}),[]);var g=[""];null!==n.groupBy&&(g=i.QQ.map((function(e){return e[n.groupBy]})).flat(),g=(0,r.Z)(new Set(g)));var j=[n.berries,n.ingredients,n.skills,n.specialties,n.locations].some((function(e){return e.size>0}));return(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("div",{className:"flex justify-end py-3",children:(0,d.jsxs)("div",{className:"flex w-full items-center gap-x-3 md:w-3/5 lg:w-1/3",children:[(0,d.jsx)(a.E1,{value:n.keyword,onChange:t}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(a.wn,{checked:n.displayFilter,onChange:y("displayFilter")}),j&&(0,d.jsx)(a.z$,{})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(a.WD,{checked:n.displayGroupBy,onChange:y("displayGroupBy")}),null!==n.groupBy&&(0,d.jsx)(a.z$,{})]})]})}),(0,d.jsx)(u,{filter:n,handleChickChange:o,handleGroupByChange:p,removeFilter:h,handleFirstChange:y("onlyFirstIngredient")}),(0,d.jsx)(l.Fl,{title:"\u6e05\u55ae"}),(0,d.jsx)("div",{className:"mt-4 space-y-8",children:g.map((function(e){return(0,d.jsxs)("div",{className:"space-y-2",children:[""!==e&&(0,d.jsx)(l.c$,{title:e}),(0,d.jsx)(f,{pmList:i.QQ,filter:n,groupBy:e})]},e)}))})]})}},389:function(e,n,t){t.d(n,{EK:function(){return o},Zb:function(){return a},WD:function(){return h},wn:function(){return u},z$:function(){return p},E1:function(){return c},zZ:function(){return m},DI:function(){return x}});var r=t(733),s=t(268),l=t(213),i=t(184);function a(e){var n=e.pm;return(0,i.jsxs)("div",{className:"flex w-full flex-col items-center gap-1 p-2",children:[(0,i.jsxs)("p",{className:"font-bold",children:["No. ",n.pid.slice(-3)]}),(0,i.jsx)("div",{className:(0,r.Z)("relative h-16 w-16 overflow-hidden rounded-full","outline outline-2 outline-white",s.Bo[s.Dy[n.type]]),children:(0,i.jsx)(l.JO.lA.Pm,{pm:n})}),(0,i.jsx)("p",{className:"text-base",children:n.name}),(0,i.jsxs)("p",{className:"flex items-center text-xs",children:[n.sleep_type," - ",n.specialty]}),(0,i.jsx)("p",{className:"flex",children:new Array(n.berry_quantity).fill(0).map((function(e,t){return(0,i.jsx)("span",{className:"relative h-8 w-8",children:(0,i.jsx)(l.JO.lA.UL,{name:n.berry})},t)}))}),n.ingredients.length>0&&(0,i.jsx)("p",{className:"flex",children:n.ingredients.map((function(e){return(0,i.jsx)("span",{className:"relative h-8 w-8",children:(0,i.jsx)(l.JO.lA.o7,{name:e})},e)}))})]})}function c(e){var n=e.value,t=e.onChange;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,i.jsx)(l.JO.ol,{className:"h-5 w-5"})}),(0,i.jsx)("input",{type:"search",className:(0,r.Z)("block w-full rounded-lg border border-gray-300","bg-gray-50 p-2 pl-10 text-sm text-gray-900"),placeholder:"\u641c\u5c0b\u540d\u7a31",value:n,onChange:t})]})})}function o(e){var n=e.list,t=e.checkSet,s=e.Icon,a=e.handleChange;return(0,i.jsx)("div",{className:(0,r.Z)("flex w-full flex-wrap justify-items-center gap-x-4 gap-y-3 pb-2 pl-2"),children:n.map((function(e){return(0,i.jsx)(l.oC,{label:e,checked:t.has(e),onChange:a,children:s&&(0,i.jsx)(s,{name:e})},e)}))})}function d(e){var n=e.list,t=e.select,s=e.handleChange;return(0,i.jsx)("div",{className:(0,r.Z)("flex w-full flex-wrap gap-4 pb-2 pl-2"),children:n.map((function(e){return(0,i.jsx)(l.F2,{label:e,checked:null===t&&"none"===e.key||t===e.key,onChange:s},e.key)}))})}function u(e){var n=e.checked,t=e.onChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"checkbox",name:"filter",id:"filter",className:"hidden",checked:n,onChange:t}),(0,i.jsx)("label",{htmlFor:"filter",className:"flex cursor-pointer flex-col items-center",children:(0,i.jsx)(l.JO.wn,{className:"h-6 w-6"})})]})}function h(e){var n=e.checked,t=e.onChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"checkbox",name:"category",id:"category",className:"hidden",checked:n,onChange:t}),(0,i.jsx)("label",{htmlFor:"category",className:"flex cursor-pointer flex-col items-center",children:(0,i.jsx)(l.JO.WD,{className:"h-6 w-6"})})]})}function p(){return(0,i.jsx)("span",{className:"absolute -top-1 left-4 h-3 w-3 rounded-full bg-custom-green"})}var f=t(577);function m(e){var n=e.filter,t=e.handleChickChange,s=e.handleFirstChange;return(0,i.jsxs)("div",{className:(0,r.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayFilter?"mb-4 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u6a39\u679c"}),(0,i.jsx)(o,{list:f.nI.map((function(e){return e.name})),Icon:l.JO.lA.UL,checkSet:n.berries,handleChange:t("berries")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u98df\u6750"}),(0,i.jsx)("div",{className:"pl-2",children:(0,i.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,i.jsx)("input",{type:"checkbox",value:"",className:"peer sr-only",checked:n.onlyFirstIngredient,onChange:s}),(0,i.jsx)("div",{className:(0,r.Z)("peer h-6 w-11 rounded-full bg-gray-200","after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full","after:border after:border-gray-300 after:bg-white after:transition-all after:content-['']","peer-checked:bg-custom-green peer-checked:after:translate-x-full peer-checked:after:border-white")}),(0,i.jsx)("span",{className:"ml-3 text-sm",children:"\u53ea\u6311\u9078\u7b2c\u4e00\u98df\u6750"})]})}),(0,i.jsx)(o,{list:f.MP.map((function(e){return e.name})),Icon:l.JO.lA.o7,checkSet:n.ingredients,handleChange:t("ingredients")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u5c08\u9577"}),(0,i.jsx)(o,{list:f.cw,checkSet:n.specialties,handleChange:t("specialties")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u4e3b\u6280\u80fd"}),(0,i.jsx)(o,{list:f.nb,checkSet:n.skills,handleChange:t("skills")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u5340\u57df"}),(0,i.jsx)(o,{list:f.ak,checkSet:n.locations,handleChange:t("locations")})]})}function x(e){var n=e.filter,t=e.handleGroupByChange,s=[{key:"none",name:"\u7121"},{key:"sleep_type",name:"\u7761\u7720\u5206\u985e"},{key:"berry",name:"\u6a39\u679c"},{key:"ingredients",name:"\u98df\u6750"+(n.onlyFirstIngredient?"(\u7b2c\u4e00\u98df\u6750)":"")},{key:"specialty",name:"\u5c08\u9577"},{key:"skill",name:"\u4e3b\u6280\u80fd"},{key:"type",name:"\u5c6c\u6027"}];return(0,i.jsxs)("div",{className:(0,r.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayGroupBy?"mb-2 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,i.jsx)(l.c$,{title:"\u5206\u7d44\u65b9\u5f0f"}),(0,i.jsx)(d,{list:s,select:n.groupBy,handleChange:t})]})}}}]);
//# sourceMappingURL=List.6af45fc4.chunk.js.map