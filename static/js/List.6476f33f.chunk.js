"use strict";(self.webpackChunksleepoke=self.webpackChunksleepoke||[]).push([[842],{200:function(e,n,s){s.r(n),s.d(n,{default:function(){return v}});var t=s(433),r=s(791),l=s(419),i=s(577),a=s(389),c=s(439),o=s(733),u=s(184);function d(e){var n=e.filter,s=e.handleChickChange,r=e.handleGroupByChange,i=e.removeFilter,d=e.handleFirstChange,h=e.handleCheckChange,p=[n.berries,n.ingredients,n.skills,n.specialties,n.locations].some((function(e){return e.size>0})),f=[{set:n.berries,name:"\u6a39\u679c",key:"berries"},{set:n.ingredients,name:"\u98df\u6750",key:"ingredients"},{set:n.specialties,name:"\u5c08\u9577",key:"specialties"},{set:n.skills,name:"\u4e3b\u6280\u80fd",key:"skills"},{set:n.locations,name:"\u5340\u57df",key:"locations"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.zZ,{filter:n,handleChickChange:s,handleFirstChange:d,handleCheckChange:h}),(0,u.jsx)(a.DI,{filter:n,handleGroupByChange:r}),(0,u.jsx)("div",{className:(0,o.Z)("mb-2 flex flex-wrap gap-2","transition-all duration-300",p&&!1===n.displayGroupBy?"mb-4 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:!n.displayFilter&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"py-1 pl-2",children:"\u7be9\u9078\u9805\u76ee\uff1a"}),f.filter((function(e){return e.set.size>0})).map((function(e){var n=e.name,s=e.set,r=e.key;return(0,t.Z)(s).map((function(e){return[n,e,r]}))})).flat().map((function(e){var s=(0,c.Z)(e,3),t=s[0],r=s[1],a=s[2],d="".concat(t,"-").concat(r);return(0,u.jsxs)("span",{className:(0,o.Z)("flex items-center gap-x-2","rounded-xl bg-amber-100 px-2 py-1 shadow-list-items"),children:["\u98df\u6750"===t&&n.onlyFirstIngredient&&"(\u7b2c\u4e00\u98df\u6750)",r,(0,u.jsx)(l.JO.x8,{className:"h-3 w-3",onClick:function(){i(a,r)}})]},d)}))]})})]})}var h=s(87),p=s(268),f={"\u666e\u901a":0,"\u8d85\u7d1a":10,"\u9ad8\u7d1a":100,"\u5927\u5e2b":1e3};function x(e){var n=e.pmList,s=e.filter,r=e.groupBy,l=n.filter((function(e){return function(e,n){if(null===s.groupBy)return!0;if("level"===s.groupBy){var t;if(0===s.locations.size)return!0;var r=f[n.slice(0,2)]+Number(n.slice(2));return null===(t=e.locations[Object.keys(e.locations).find((function(e){return s.locations.has(e)}))])||void 0===t?void 0:t.some((function(e){return f[e.level]+e.subLevel===r}))}return Array.isArray(e[s.groupBy])?"ingredients"===s.groupBy&&s.onlyFirstIngredient?e[s.groupBy][0]===n:e[s.groupBy].includes(n):e[s.groupBy]===n}(e,r)})).filter((function(e){var n=""===s.keyword;return""!=s.keyword&&(n=e.name.includes(s.keyword)),n&&s.berries.size>0&&(n=s.berries.has(e.berry)),n&&s.ingredients.size>0&&(n=s.onlyFirstIngredient?void 0!==(0,t.Z)(s.ingredients).find((function(n){return n===e.ingredients[0]})):void 0!==e.ingredients.find((function(e){return s.ingredients.has(e)}))),n&&s.skills.size>0&&(n=s.skills.has(e.skill)),n&&s.specialties.size>0&&(n=s.specialties.has(e.specialty)),n&&s.locations.size>0&&(n=Object.keys(e.locations).some((function(e){return s.locations.has(e)}))),n})).sort((function(e,n){return"level"!==s.groupBy?0:e.sleep_type>n.sleep_type?1:e.sleep_type<n.sleep_type?-1:e.pid>n.pid?1:-1}));return(0,u.jsxs)(u.Fragment,{children:["level"===s.groupBy&&(0,u.jsx)("div",{className:"flex gap-4 py-2 pl-1",children:Object.entries(l.reduce((function(e,n){return void 0===e[n.sleep_type]&&(e[n.sleep_type]=0),e[n.sleep_type]+=1,e}),{})).map((function(e){var n=(0,c.Z)(e,2),s=n[0],t=n[1];return(0,u.jsxs)("span",{className:(0,o.Z)("rounded-full px-2 py-1","shadow-list-items","text-sm",p.vh[s]),children:[s," ",t," \u7a2e"]},s)}))}),(0,u.jsx)("ul",{className:(0,o.Z)("grid grid-cols-list-mobile justify-between justify-items-center gap-y-4","md:mx-0 md:grid-cols-list md:gap-x-4","h-full"),children:l.map((function(e){return(0,u.jsxs)("li",{className:(0,o.Z)("relative w-28 md:w-32","rounded-xl text-center","transition-all duration-300","shadow-list-items hover:shadow-list-items--hover","hover:translate-x-[-0.2rem] hover:translate-y-[-0.2rem]",p.vh[e.sleep_type]),children:[(0,u.jsx)(a.Zb,{pm:e,filter:s,groupBy:r}),(0,u.jsx)(h.rU,{className:"stretchedLink",to:"/pm/".concat(e.pid.slice(-3))})]},e.pid)}))})]})}var y=s(942),m=s(413),g=s(141);var v=function(){var e=function(){var e=(0,g.y)().week,n=(0,r.useState)({keyword:"",berries:new Set,ingredients:new Set,onlyFirstIngredient:!1,skills:new Set,specialties:new Set,locations:new Set,displayFilter:!1,groupBy:null,displayGroupBy:!1,isUseSnorlaxBerries:!1,isUseSnorlaxLocations:!1,level:"",subLevel:0}),s=(0,c.Z)(n,2),t=s[0],l=s[1];return(0,r.useEffect)((function(){l((function(n){return t.isUseSnorlaxBerries?(0,m.Z)((0,m.Z)({},n),{},{berries:new Set(e.snorlaxLike)}):n}))}),[t.isUseSnorlaxBerries,e]),(0,r.useEffect)((function(){l((function(n){return t.isUseSnorlaxLocations?(0,m.Z)((0,m.Z)({},n),{},{locations:new Set([e.area])}):n}))}),[t.isUseSnorlaxLocations,e]),{filter:t,handleInputChange:function(e){var n=e.target.value;l((function(e){return(0,m.Z)((0,m.Z)({},e),{},{keyword:n})}))},handleChickChange:function(e){return function(n){var s=n.target,t=s.name,r=s.checked;l((function(n){return r?n[e].add(t):n[e].delete(t),(0,m.Z)((0,m.Z)({},n),{},(0,y.Z)({},e,n[e]))}))}},removeFilter:function(e,n){l((function(s){s[e].delete(n);var t=(0,m.Z)((0,m.Z)({},s),{},(0,y.Z)({},e,s[e]));return"berries"===e?t.isUseSnorlaxBerries=!1:"locations"===e&&(t.isUseSnorlaxLocations=!1,"level"===t.groupBy&&(t.groupBy=null)),t}))},handleGroupByChange:function(e){var n=e.target.name;l((function(e){return"level"===n&&1!==e.locations.size?(alert("\u8acb\u9078\u64c7\u4e00\u500b\u5340\u57df\u51fa\u4f86"),e):(0,m.Z)((0,m.Z)({},e),{},{groupBy:"none"!==n?n:null})}))},handleCheckChange:function(e){return function(n){var s=n.target.checked;l((function(n){var t=(0,m.Z)((0,m.Z)({},n),{},(0,y.Z)({},e,s));return"isUseSnorlaxBerries"===e&&!1===s?t.berries=new Set:"isUseSnorlaxLocations"===e&&!1===s&&(t.locations=new Set),t}))}}}}(),n=e.filter,s=e.handleInputChange,o=e.handleChickChange,h=e.removeFilter,p=e.handleGroupByChange,f=e.handleCheckChange;(0,r.useEffect)((function(){document.title="Sleep Pok\xe9dex"}),[]);var v=[""];null!==n.groupBy&&("level"===n.groupBy?1===n.locations.size&&(v=["\u666e\u901a","\u8d85\u7d1a","\u9ad8\u7d1a","\u5927\u5e2b"].flatMap((function(e){return new Array("\u5927\u5e2b"!==e?5:20).fill(0).map((function(n,s){return"".concat(e).concat(s+1)}))}))):(v=i.QQ.map((function(e){return e[n.groupBy]})).flat(),v=(0,t.Z)(new Set(v))));var j=[n.berries,n.ingredients,n.skills,n.specialties,n.locations].some((function(e){return e.size>0})),k=i.ak[0];return"level"===n.groupBy&&(k=i.ak.find((function(e){return n.locations.has(e.name)}))||i.ak[0]),(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("div",{className:"flex justify-end py-3",children:(0,u.jsxs)("div",{className:"flex w-full items-center gap-x-3 md:w-3/5 lg:w-1/3",children:[(0,u.jsx)(a.E1,{value:n.keyword,onChange:s}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(a.wn,{checked:n.displayFilter,onChange:f("displayFilter")}),j&&(0,u.jsx)(a.z$,{})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(a.WD,{checked:n.displayGroupBy,onChange:f("displayGroupBy")}),null!==n.groupBy&&(0,u.jsx)(a.z$,{})]})]})}),(0,u.jsx)(d,{filter:n,handleChickChange:o,handleGroupByChange:p,removeFilter:h,handleFirstChange:f("onlyFirstIngredient"),handleCheckChange:f}),(0,u.jsx)(l.Fl,{title:"\u6e05\u55ae"}),(0,u.jsx)("div",{className:"mt-4 space-y-8",children:v.map((function(e,s,t){var r=e;return"level"===n.groupBy&&(r+=" (\u5361\u6bd4\u7378\u80fd\u91cf\uff1a".concat(k.strength[s].toLocaleString("zh-TW")," \u5206)").concat(s<t.length-1?" \u4e0b\u4e00\u7b49\u9700 ".concat((k.strength[s+1]-k.strength[s]).toLocaleString("zh-TW")," \u5206"):"")),(0,u.jsxs)("div",{className:"space-y-2",children:[""!==e&&(0,u.jsx)(l.c$,{title:r}),(0,u.jsx)(x,{pmList:i.QQ,filter:n,groupBy:e})]},e)}))})]})}},389:function(e,n,s){s.d(n,{EK:function(){return o},Zb:function(){return a},WD:function(){return h},wn:function(){return d},z$:function(){return p},E1:function(){return c},zZ:function(){return x},DI:function(){return y}});var t=s(733),r=s(268),l=s(419),i=s(184);function a(e){var n,s,a,c=e.pm,o=e.filter,u=e.groupBy,d="level"===o.groupBy,h=null;"level"===o.groupBy&&(h=null===(a=c.locations[Object.keys(c.locations).find((function(e){return o.locations.has(e)}))])||void 0===a?void 0:a.find((function(e){return"".concat(e.level).concat(e.subLevel)===u})));return(0,i.jsxs)("div",{className:"flex w-full flex-col items-center gap-1 p-2",children:[(0,i.jsxs)("p",{className:"font-bold",children:["No. ",c.pid.slice(-3)]}),(0,i.jsx)("div",{className:(0,t.Z)("relative h-16 w-16 overflow-hidden rounded-full","outline outline-2 outline-white",r.Bo[r.Dy[c.type]]),children:(0,i.jsx)(l.JO.lA.Pm,{pm:c})}),(0,i.jsx)("p",{className:"text-base",children:c.name}),(0,i.jsxs)("p",{className:"flex items-center text-xs",children:[c.sleep_type," - ",c.specialty]}),!1===d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"flex",children:new Array(c.berry_quantity).fill(0).map((function(e,n){return(0,i.jsx)("span",{className:"relative h-8 w-8",children:(0,i.jsx)(l.JO.lA.UL,{name:c.berry})},n)}))}),c.ingredients.length>0&&(0,i.jsx)("p",{className:"flex",children:c.ingredients.map((function(e){return(0,i.jsx)("span",{className:"relative h-8 w-8",children:(0,i.jsx)(l.JO.lA.o7,{name:e})},e)}))})]}),!0===d&&(0,i.jsxs)("p",{className:"flex items-center text-xs",children:["#","".concat(((null===(n=h)||void 0===n?void 0:n.style)||0)+1," "),c.sleep[null===(s=h)||void 0===s?void 0:s.style]||"\u5927\u809a\u4e0a\u7761"]})]})}function c(e){var n=e.value,s=e.onChange;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,i.jsx)(l.JO.ol,{className:"h-5 w-5"})}),(0,i.jsx)("input",{type:"search",className:(0,t.Z)("block w-full rounded-lg border border-gray-300","bg-gray-50 p-2 pl-10 text-sm text-gray-900"),placeholder:"\u641c\u5c0b\u540d\u7a31",value:n,onChange:s})]})})}function o(e){var n=e.list,s=e.checkSet,r=e.Icon,a=e.handleChange,c=e.prefixKey;return(0,i.jsx)("div",{className:(0,t.Z)("flex w-full flex-wrap justify-items-center gap-x-4 gap-y-3 pb-2 pl-2"),children:n.map((function(e){return(0,i.jsx)(l.oC,{label:e,checked:s.has(e),onChange:a,prefixKey:c,children:r&&(0,i.jsx)(r,{name:e,size:"h-10 w-10"})},e)}))})}function u(e){var n=e.list,s=e.select,r=e.handleChange;return(0,i.jsx)("div",{className:(0,t.Z)("flex w-full flex-wrap gap-4 pb-2 pl-2"),children:n.map((function(e){return(0,i.jsx)(l.F2,{label:e,checked:null===s&&"none"===e.key||s===e.key,onChange:r},e.key)}))})}function d(e){var n=e.checked,s=e.onChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"checkbox",name:"filter",id:"filter",className:"hidden",checked:n,onChange:s}),(0,i.jsx)("label",{htmlFor:"filter",className:"flex cursor-pointer flex-col items-center",children:(0,i.jsx)(l.JO.wn,{className:"h-6 w-6"})})]})}function h(e){var n=e.checked,s=e.onChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"checkbox",name:"category",id:"category",className:"hidden",checked:n,onChange:s}),(0,i.jsx)("label",{htmlFor:"category",className:"flex cursor-pointer flex-col items-center",children:(0,i.jsx)(l.JO.WD,{className:"h-6 w-6"})})]})}function p(){return(0,i.jsx)("span",{className:"absolute -top-1 left-4 h-3 w-3 rounded-full bg-custom-green"})}var f=s(577);function x(e){var n=e.filter,s=e.handleChickChange,r=e.handleFirstChange,a=e.handleCheckChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex gap-x-4",children:[(0,i.jsx)(l.ZD,{text:"\u4f7f\u7528\u5361\u6bd4\u7378\u7684\u5340\u57df",checked:n.isUseSnorlaxLocations,handleChange:a("isUseSnorlaxLocations")}),(0,i.jsx)(l.ZD,{text:"\u4f7f\u7528\u5361\u6bd4\u7378\u7684\u6a39\u679c",checked:n.isUseSnorlaxBerries,handleChange:a("isUseSnorlaxBerries")})]}),(0,i.jsxs)("div",{className:(0,t.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayFilter?"mb-4 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u6a39\u679c"}),(0,i.jsx)(o,{list:f.nI.map((function(e){return e.name})),Icon:l.JO.lA.UL,checkSet:n.berries,handleChange:s("berries")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u98df\u6750"}),(0,i.jsx)(l.ZD,{text:"\u53ea\u6311\u9078\u7b2c\u4e00\u98df\u6750",checked:n.onlyFirstIngredient,handleChange:r}),(0,i.jsx)(o,{list:f.MP.map((function(e){return e.name})),Icon:l.JO.lA.o7,checkSet:n.ingredients,handleChange:s("ingredients")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u5c08\u9577"}),(0,i.jsx)(o,{list:f.cw,checkSet:n.specialties,handleChange:s("specialties")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u4e3b\u6280\u80fd"}),(0,i.jsx)(o,{list:f.nb,checkSet:n.skills,handleChange:s("skills")}),(0,i.jsx)(l.c$,{title:"\u7be9\u9078\uff1a\u5340\u57df"}),(0,i.jsx)(o,{list:f.ak.map((function(e){return e.name})),checkSet:n.locations,handleChange:s("locations")})]})]})}function y(e){var n=e.filter,s=e.handleGroupByChange,r=[{key:"none",name:"\u7121"},{key:"sleep_type",name:"\u7761\u7720\u5206\u985e"},{key:"berry",name:"\u6a39\u679c"},{key:"ingredients",name:"\u98df\u6750"+(n.onlyFirstIngredient?"(\u7b2c\u4e00\u98df\u6750)":"")},{key:"specialty",name:"\u5c08\u9577"},{key:"skill",name:"\u4e3b\u6280\u80fd"},{key:"type",name:"\u5c6c\u6027"},{key:"level",name:"\u5361\u6bd4\u7378\u7b49\u7d1a"}];return(0,i.jsxs)("div",{className:(0,t.Z)("origin-top space-y-4 overflow-hidden transition-all duration-300",n.displayGroupBy?"mb-2 h-full scale-y-100 opacity-100":"h-0 scale-y-0 opacity-0"),children:[(0,i.jsx)(l.c$,{title:"\u5206\u7d44\u65b9\u5f0f"}),(0,i.jsx)(u,{list:r,select:n.groupBy,handleChange:s})]})}}}]);
//# sourceMappingURL=List.6476f33f.chunk.js.map